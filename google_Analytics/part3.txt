## 올인원 패키지 : 구글 애널리틱스 ## 
# PART 3 : Google Analytics 설정 # 

1. 추적코드 설치 및 페이지뷰 전송
- 추적코드 설치방법
1.gtag.js > 중심
 : 가장 간단한 설치 및 진행 가능(페이지 뷰 기준)
 : <head>에 코드만 넣으면 설치완료.

2.GTM (Google Tag Manager) - 구글 태그 관리자
 : 마케터 친화적
 : 설정의 유연한 변경
 : 다양한 제품과의 연동
 $ but: 유지보수 관리 어려움
3.gtag.js + GTM (Google Tag Manager)
 : 두 방법의 장점을 모두 합친 방법
 : 홈페이지 환경에 따라 충돌이 일어날 수 있음
 # gtag.js를 막아야함.
> 본인의 서비스에 어울리는 방법으로 선택하여 진행!

3.이벤트 데이터 전송 및 활용 방안
- 페이지 뷰와는 별개로 사용자의 행동을 추적가능
- 이벤트 카테고리 > 이벤트 액션 > 이벤트 라벨
- 이벤트 값: 금전적인 가치를 설정함
- 이벤트 태깅 가이드 실습
★ 활용방안
- 단순클릭뿐 아니라 페이지내 상호작용을 알수있음
- kpi로 활용하고자하는 상호작용을 이벤트로 보내는것이 중요
- 페이지 스크롤 이벤트 트래킹 중요!

4. 맞춤측정기준 기획 예시 및 설정 - 1
- 맞춤측정기준?
기본적으로 측정되는 이외에 추가적으로 측정할 데이터를 수집하기 위한 기준
- 내부고객데이터를 맞춤측정기준를 ga를 통해 전송하여 고객정보를 분석할수 있음

5. 맞춤측정기준 기획 예시 및 설정 - 2
- 범위 : 맞춤측정기준이 처리될때는 범위에 따라 맞춤측정기준과 연결되는 데이터가 정해짐.
    1) hit : 맞춤측정기준은 값이 모든 조회에 적용.
    2) 세션 : 맞춤측정기준은 값이 단일세션의 모든 조회에 적용.
    3) 사용자 : 사용자 값이 변경되거나 맞춤측정기준을 사용하지 않게 될 때까지 현재
    및 미래의 세션에 있는 모든 조회에 값이 적용.
    4) 제품 : 향상된 전자상거래에서 해당 값이 설정된 제품에만 
    단일 조회에서 각각 처리됨.
- 맞춤측정기준 단위
# hit 단위 : 사이트명 / 검색어 / 검색유형 / 검색여부 / 로그인 여부
# 세션 or 사용자 범위
: client ID / user ID / 고객CRM 데이터(성별,등급,연령...)
# 제품 단위
: 전자상거래에 들어갈 상품에 적용.

6. 향상된 전자상거래 기획 예시 및 설정
- 향상된 전자상거래
: 구글 애널리틱스의 향상된 전자상거래의 기능으로 사용자의 쇼핑 행동을 단계별로 수집하여 분석가능
: 사용자의 쇼핑행동을 추적하기 위해서는 아래와 같은 단계마다 데이터를 수집해야함
    step 1. Product Click(상품 클릭)
    step 2. Product Detail(상품 상세페이지 조회)
    step 3. Add / Remove from Cart(장바구니 담기 / 장바구니 제거)
    step 4. Checkout(주문서 작성)
    step 5. Purchase(구매완료)
    step 6. Refund(환불)
        
7. 목표 설정을 통한 전환 추적
- 목표 : 모든 홈페이지에는 각각의 목표가 있음
* 전자상거래 사이트 -> 상품구매완료
* 프로모션 사이트 -> 참여완료
- Google Analytics에서 목표를 설정하여, 목표전환수와 전환율 등 다양한 데이터를 확인가능.
- Google Analytics에서 설정할 수 있는 유형 4가지 
    > 도착
    > 시간
    > 세션당 페이지뷰 수
    > 이벤트
    
8. 콘텐츠 그룹 설정을 통한 페이지 그룹핑
- 콘텐츠 그룹 : Google Analytics 콘텐츠 그룹 설정을 통해 페이지를 논리적인 구조로 그룹화가 가능
    > 그룹화를 통해 보다 용이한 데이터 분석 가능
    > 콘텐츠 그룹별 방문수, 페이지뷰 수는 물론 콘텐츠 그룹간 이동경로까지 분석가능
- 분류방법
    > 추적코드별로 분류
    (장점)
    GA설정을 변경할 필요없이 개발자의 코드 설정만으로도 콘텐츠 그룹 생성/변경 가능
    (단점)
    페이지 내 소스 수정이 필요함으로, 개발팀의 도움없이 설정 불가
    > 추출을 사용한 분류(URL 및 페이지 제목)
    (장점)
    개발자의 도움 필요없음
    (단점)
    새로운 페이지 추가 및 변경시 정규표현식 수정이 필요, 정규표현식에 대한 학습 필요
    > 규칙정의를 사용한 분류
    (장점)
    개발자의 도움 필요없음, 정규표현식에 대한 학습 필요없음
    (단점)
    새로운 페이지 추가 및 변경시 규칙을 추가 및 변경이 필요

9. 필터 설정을 통한 데이터 처리
- 필터
: 보기에 필터를 설정하여 보기의 데이터를 더 작은 그룹으로 분류함
- 특정트래픽 위의 하위집함만 포함
- 존재하지 않는 데이터 제외
- 특정정보 검색 및 변환
- 필터유형
: 제외, 포함, 대문자, 소문자, 찾기 및 바꾸기,고급

10. 가장 많이 쓰는 필터 설정 예시
- full url 필터
- full referrer 필터
: 사이트에 들어오기전 고객이 어느사이트를 거쳐왔는지 보는 필터
- host 필터
- 소문자 필터
- PC / Mobile app
PC: 기기카테고리 - desktop 포함 / application 제외
mobile web : 기기카테고리 - desktop 제외 / application 제외
app: 기기카테고리 - desktop 제외 / application 포함
- 내부 ip 제거
- 파라메터 제거

11. 데이터임포트를통한 데이터 연결
- 관리 > 데이터 가져오기
데이터 가져오기 방식
데이터 세트 스키마
데이터 세트 세부정보

12. 비용 데이터 연결해보기
(예시)
8월 비용데이터 분석
- 아래 한가지는 입력되어야 함
노출수, 비용, 클릭수
- 데이터를 엑셀로 만든후 csv파일로 저장 후 파일 업로드
- 그 후 ROI분석 보기

13. 맞춤 채널 그룹 만들기
- 기본채널그룹 정의
: 직접 자연검색 소셜 등
- 맞춤채널의 장점
: 보고서에서 바로보기 가능
: 사용자 단위로 보고싶은 채널그룹 확인 가능
: 데이터를 변경하지 않고 채널그룹 확인가능

14. 기타설정
- 설정이 필요한 유형
1) 보기 구조 설정 방법(+봇 필터 제거 / 검색어 파라미터 설정)
    RAW보기 / MASTER보기 / TEST 보기
    ** 검색기능이 있는 홈페이지라면 무조건 검색어 파라미터 설정 > [사이트 검색 추적]
2) 사용자 관리하는 방법
    계정에 권한을 주면 > 계정에 속한 모든 속성 / 보기까지 권한부여
    속성에 권한을 주면 > 속성에 속한 모든 보기까지 권한부여
    대형 조직에서는 *팀별로 계정을 관리*
3) 캠페인 / 세션시간 설정
    캠페인 유지기간에 따라 소스/매체가 다르게 기여 받을수도 있다.(기본 6개월)
    세션 시간의 경우, 정말 필요할 경우 수정!(기본 30분)
4) 추천제외목록
    PG사 주소가 있을 경우, 제일 먼저 PG사 사이트를 추천 제외에 올려라,
    추후 소스/매체 분석을 통해 추천제외 목록에 추가.